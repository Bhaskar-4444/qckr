<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QCKR - Nationwide Shipping</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-sans">
  <!-- Navbar -->
  <nav class="bg-gradient-to-r from-blue-600 to-teal-500 text-white p-4 flex justify-between items-center border-b-2 border-blue-400 shadow-md">
    <div class="text-3xl font-bold">QCKR</div>
    <div class="space-x-4">
      <a href="index.html#home" class="hover:text-gray-300">Home</a>
      <a href="index.html#services" class="hover:text-gray-300">Services</a>
      <a href="index.html#about" class="hover:text-gray-300">About</a>
      <a href="index.html#contact" class="hover:text-gray-300">Contact</a>
      <a href="index.html#auth" class="hover:text-gray-300">Login/Signup</a>
    </div>
  </nav>

  <!-- Nationwide Shipping Options Section -->
  <section class="py-16 bg-gradient-to-r from-blue-100 to-teal-100 text-center border-2 border-blue-400 rounded-lg shadow-md">
    <h2 class="text-3xl font-bold mb-8 text-gray-800">Nationwide Shipping Options</h2>
    <div class="max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 gap-8 sm:gap-6">
      <div class="bg-blue-50 p-8 rounded-lg shadow-lg border-2 border-blue-400 hover:scale-105 transition-transform cursor-pointer" onclick="showFareEstimate('Two-Wheeler')">
        <img src="https://th.bing.com/th/id/OIP.vBDCZpZLZPPpBZM8EhHYVwHaEK?w=316&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3" alt="AI-Generated Two-Wheeler Delivery" class="w-full h-40 object-cover rounded-lg mb-4">
        <h3 class="text-xl font-semibold mb-4 text-gray-800">Two-Wheeler</h3>
        <p class="text-gray-700">Swift delivery for small parcels using motorcycles, perfect for urgent city deliveries.</p>
      </div>
      <div class="bg-teal-50 p-8 rounded-lg shadow-lg border-2 border-blue-400 hover:scale-105 transition-transform cursor-pointer" onclick="showFareEstimate('Mini Trucks')">
        <img src="https://th.bing.com/th/id/OIP.rcr_W3lu4oz2RW9cpnFkDwHaEF?w=315&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="AI-Generated Mini Truck Delivery" class="w-full h-40 object-cover rounded-lg mb-4">
        <h3 class="text-xl font-semibold mb-4 text-gray-800">Trucks</h3>
        <p class="text-gray-700">Compact trucks for medium-sized parcels, ideal for local and regional express deliveries.</p>
      </div>
      <div class="bg-indigo-50 p-8 rounded-lg shadow-lg border-2 border-blue-400 hover:scale-105 transition-transform cursor-pointer" onclick="showFareEstimate('Packers and Movers')">
        <img src="https://th.bing.com/th/id/OIP.muDe5MYMTNeC7RJGfBVUswHaF6?w=192&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="AI-Generated Packers and Movers" class="w-full h-40 object-cover rounded-lg mb-4">
        <h3 class="text-xl font-semibold mb-4 text-gray-800">Packers and Movers</h3>
        <p class="text-gray-700">Professional moving services for large items and relocations, with secure packing and transport.</p>
      </div>
    </div>
  </section>

  <!-- Fare Estimate Section -->
  <section id="fareSection" class="py-16 bg-gradient-to-r from-blue-100 to-teal-100 text-center border-2 border-blue-400 rounded-lg shadow-md hidden">
    <h2 id="fareTitle" class="text-3xl font-bold mb-8 text-gray-800">Get Fare Estimate</h2>
    <div class="max-w-md mx-auto">
      <div class="mb-4">
        <label for="pickup" class="block text-gray-800 font-semibold mb-2">Pickup Address <span class="text-red-500">*</span></label>
        <input type="text" id="pickup" placeholder="Enter Pickup Location" class="w-full p-2 border rounded" required>
      </div>
      <div class="mb-4">
        <label for="drop" class="block text-gray-800 font-semibold mb-2">Drop Address <span class="text-red-500">*</span></label>
        <input type="text" id="drop" placeholder="Enter Drop Location" class="w-full p-2 border rounded" required>
      </div>
      <div class="mb-4">
        <label for="contact" class="block text-gray-800 font-semibold mb-2">Contact Number <span class="text-red-500">*</span></label>
        <input type="tel" id="contact" placeholder="Enter Contact Number" class="w-full p-2 border rounded" required>
      </div>
      <div id="dateField" class="mb-4 hidden">
        <label for="date" class="block text-gray-800 font-semibold mb-2">Delivery Date <span class="text-red-500">*</span></label>
        <input type="date" id="date" class="w-full p-2 border rounded" min="2025-08-10" value="2025-08-10" required>
      </div>
      <div class="flex space-x-4">
        <button id="fareButton" class="bg-blue-600 text-white p-2 rounded w-1/2 hover:bg-blue-700">Get Fare Estimate</button>
        <button id="bookButton" class="bg-green-600 text-white p-2 rounded w-1/2 hover:bg-green-700 hidden">Book</button>
      </div>
      <div id="fareResult" class="mt-4 text-gray-800 font-semibold hidden"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gradient-to-r from-blue-600 to-teal-500 text-white p-4 text-center border-t-2 border-blue-400 shadow-md">
    <p>&copy; 2025 QCKR. All rights reserved.</p>
  </footer>

  <!-- JavaScript for Fare Calculation and Booking -->
  <script>
    let selectedVehicle = '';

    function showFareEstimate(vehicle) {
      selectedVehicle = vehicle;
      document.getElementById('fareSection').classList.remove('hidden');
      document.getElementById('fareTitle').textContent = `Get Fare Estimate for ${vehicle}`;
      document.getElementById('fareResult').classList.add('hidden');
      document.getElementById('bookButton').classList.add('hidden');
      document.getElementById('pickup').value = '';
      document.getElementById('drop').value = '';
      document.getElementById('contact').value = '';
      const dateField = document.getElementById('dateField');
      if (vehicle === 'Packers and Movers') {
        dateField.classList.remove('hidden');
      } else {
        dateField.classList.add('hidden');
      }
    }

    // Mock function to calculate road distance (improved for nearby locations)
    async function calculateRoadDistance(pickup, drop) {
      await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API delay
      if (pickup === drop) return 0;

      // Simple heuristic: if addresses share a common prefix (e.g., same city), assume shorter distance
      const pickupLower = pickup.toLowerCase();
      const dropLower = drop.toLowerCase();
      const commonPrefix = pickupLower.split(' ').filter(word => dropLower.includes(word)).length > 0;
      
      if (commonPrefix) {
        // Nearby locations (same city): 2-15 km
        return Math.floor(Math.random() * 14) + 2;
      } else {
        // Different cities: 20-100 km
        return Math.floor(Math.random() * 81) + 20;
      }
    }

    // Mock function to send email to hariom.556879@gmail.com
    async function sendBookingEmail(bookingDetails) {
      console.log(`Sending email to hariom.556879@gmail.com with booking details:`, bookingDetails);
      await new Promise(resolve => setTimeout(resolve, 500)); // Simulate email sending
      return true;
    }

    document.getElementById('fareButton').addEventListener('click', async function() {
      const pickup = document.getElementById('pickup').value.trim();
      const drop = document.getElementById('drop').value.trim();
      const contact = document.getElementById('contact').value.trim();
      const date = document.getElementById('date').value;

      // Basic validation
      if (!pickup || !drop || !contact) {
        alert('Please fill in all required fields.');
        return;
      }
      if (!/^\d{10}$/.test(contact)) {
        alert('Please enter a valid 10-digit contact number.');
        return;
      }
      if (selectedVehicle === 'Packers and Movers' && !date) {
        alert('Please select a delivery date for Packers and Movers.');
        return;
      }

      // Calculate road distance
      const distance = await calculateRoadDistance(pickup, drop);
      if (distance === 0) {
        alert('Pickup and drop locations cannot be the same.');
        return;
      }

      // Fare rates based on vehicle type
      const fareRates = {
        'Two-Wheeler': { base: 30, perKm: 5 },
        'Mini Trucks': { base: 50, perKm: 10 },
        'Packers and Movers': { base: 200, perKm: 20 }
      };

      const { base, perKm } = fareRates[selectedVehicle] || fareRates['Mini Trucks'];
      const fare = base + (distance * perKm);

      // Display fare
      const fareResult = document.getElementById('fareResult');
      fareResult.textContent = `Estimated Fare: â‚¹${fare} for ${distance} km (${selectedVehicle})`;
      fareResult.classList.remove('hidden');

      // Show Book button
      document.getElementById('bookButton').classList.remove('hidden');
    });

    document.getElementById('bookButton').addEventListener('click', async function() {
      const pickup = document.getElementById('pickup').value.trim();
      const drop = document.getElementById('drop').value.trim();
      const contact = document.getElementById('contact').value.trim();
      const date = document.getElementById('date').value;
      const fareResult = document.getElementById('fareResult').textContent;

      // Prepare booking details
      const bookingDetails = {
        vehicle: selectedVehicle,
        pickup,
        drop,
        contact,
        date: selectedVehicle === 'Packers and Movers' ? date : 'N/A',
        fare: fareResult
      };

      // Send booking details to email
      const emailSent = await sendBookingEmail(bookingDetails);
      if (emailSent) {
        if (selectedVehicle === 'Packers and Movers') {
          alert(`Booking confirmed for ${selectedVehicle} from ${pickup} to ${drop} on ${date}. Contact: ${contact}. Details sent to hariom.556879@gmail.com.`);
        } else {
          alert(`Booking confirmed for ${selectedVehicle} from ${pickup} to ${drop}. Contact: ${contact}. Details sent to hariom.556879@gmail.com.`);
        }
      } else {
        alert('Failed to send booking details. Please try again.');
      }
    });
  </script>
</body>
</html>
